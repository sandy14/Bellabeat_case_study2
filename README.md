# Bellabeat_case_study2

#This Case study is done by Sandhya Verma as part of Google Professional business analytics certificate project.#

Case Study Brief

#Scenario#

You are a junior data analyst working on the marketing analyst team at Bellabeat, a high-tech manufacturer of health-focused products for women. Bellabeat is a successful small company, but they have the potential to become a larger player in the global smart device market. Urška Sršen, cofounder and Chief Creative Officer of Bellabeat, believes that analyzing smart device fitness data could help unlock new growth opportunities for the company. You have been asked to focus on one of
Bellabeat’s products and analyze smart device data to gain insight into how consumers are using their smart devices. The insights you discover will then help guide marketing strategy for the company. You will present your analysis to the Bellabeat executive team along with your high-level recommendations for Bellabeat’s marketing strategy.

#About the company #

Urška Sršen and Sando Mur founded Bellabeat, a high-tech company that manufactures health-focused smart products.Collecting data on activity, sleep, stress, and reproductive health has allowed Bellabeat to empower women with knowledge about their own health and habits. Since it was founded in 2013, Bellabeat has grown rapidly and quickly positioned itself as a tech-driven wellness company for women.Sršen knows that an analysis of Bellabeat’s available consumer data would reveal more opportunities for growth. She has asked the marketing analytics team to focus on a Bellabeat product and analyze smart device usage data in order to gain
insight into how people are already using their smart devices. Then, using this information, she would like high-level recommendations for how these trends can inform Bellabeat marketing strategy.


#Ask#

We will analyze smart device usage data in order to gain insight into how consumers use non-Bellabeat smart devices.These questions will ask-

1. What are some trends in smart device usage?
2. How could these trends apply to Bellabeat customers?
3. How could these trends help influence Bellabeat marketing strategy?

#Data Source#

1.This dataset generated by respondents to a distributed survey via Amazon Mechanical Turk.

2.Data collected between 03.12.2016-05.12.2016.

3.Sample size -30 eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring.


#Prepare#
.FitBit Fitness Tracker Data (CC0: Public Domain, dataset made available through Mobius): This Kaggle data set contains personal fitness tracker from thirty fitbit users.
.Thirty eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring. It includes information about daily activity, steps, and heart rate that can be used to explore users’ habits.
.Data time frame: Apr 12'2016 - May 12'2016

#Data Analysis in R#

install.packages("tidyverse")
library(tidyverse)
install.packages("tidyr")
install.packages("lubridate")
install.packages("dplyr")
install.packages("ggplot2")
library(tidyverse)
library(tidyr)
library(lubridate)
library(dplyr)
library(ggplot2)
install.packages("janitor")
library(janitor)


#Import dataset using CSV files#


dailyActivity <- read.csv("dailyActivity_merged.csv")

#Get the directory#
getwd()
daily_sleep <- read.csv("dailySleep_merged.csv")
daily_Intensities <- read.csv("dailyIntensities_merged.csv")
Hourly_steps <- read.csv("hourlySteps_merged.csv")
Hourly_intensity <- read.csv("hourlyIntensities_merged.csv")
Hourly_calories <- read.csv("hourlyCalories_merged.csv")
weight <- read.csv("weightLogInfo_merged.csv")

#Preview of datasets #
head(dailyActivity_merged)
head(Hourly_steps)
head(Hourly_intensity)
head(Hourly_calories)
head(weight)

colnames(dailyActivity_merged)
str(dailyActivity_merged)

#process data #

#Explore data  to find dintinct values#
  
n_distinct(dailyActivity_merged$Id)
n_distinct(daily_sleep$Id)
n_distinct(Hourly_steps$Id)

nrow(dailyActivity_merged)
nrow(daily_sleep)


colnames(dailyActivity_merged)
colnames(daily_sleep)


#Counting duplicated rows in data frame#

sum(duplicated(dailyActivity_merged))
sum(duplicated(daily_Intensities))
sum(duplicated(Hourly_steps))
sum(duplicated(daily_sleep))

#remove duplicate values and NA#
daily_sleep <- daily_sleep%>%
  distinct()%>%
  drop_na()

dailyActivity<- dailyActivity_merged %>%
  distinct()%>%
  drop_na()

Hourly_steps <- Hourly_steps%>%
  distinct()%>%
  drop_na()

daily_Intensities <- daily_Intensities%>%
  distinct()%>%
  drop_na()

#varifying duplicate has been removed#

sum(duplicated(daily_sleep))
str(daily_sleep)
head(daily_sleep)

#Changing date-time format in dailyActivity  to merge based on date #

dailyActivity_new <- dailyActivity %>%
  mutate(date_new= as_date(mdy(ActivityDate)))
head(dailyActivity_new)  
head(daily_sleep)


#changing date time format in daily_sleep #
daily_sleep$SleepDay <- as.POSIXct(daily_sleep$SleepDay,format="%m/%d/%Y %I:%M:%S %p",tz=Sys.timezone())
head(daily_sleep)
daily_sleep_NEW <- daily_sleep %>%
  mutate(date_new=SleepDay)
head(daily_sleep_NEW)

#Converting ActivityHour from chr to datetime format#

str(Hourly_steps)
Hourly_steps <- Hourly_steps %>%
  rename(datetime= ActivityHour)%>%
  mutate(datetime= as.POSIXct(datetime,format= "%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone()))
head(Hourly_steps)


#Merging dailyActivity_new and daily_sleep_NEW#

dailyActivity_sleep <- merge(dailyActivity_new,daily_sleep_NEW, by=c("Id","date_new"))
glimpse(dailyActivity_sleep)


#categorizing users in categories #
Daily_use <- dailyActivity_sleep %>%
  group_by(Id)%>%
  summarise(days_used=sum(n()))%>%
  mutate(usage= case_when(days_used >=1  &  days_used <=10 ~"Passive_user",
                          days_used >11 &  days_used<=20 ~"Moderate_user",
                          days_used  >21 & days_used <=31 ~ "Active_user"))
head(Daily_use)


#Create a dataframe to calculate % of users #

Daily_use_Percentage <- Daily_use %>%
  group_by(usage) %>%
  summarise(total=(n()))%>%
  mutate(totals =sum(total))%>%
  group_by(usage)%>%
  summarise(Percentage=((total/totals)*100))

head(Daily_use_Percentage)  

#Create a Pie chart to show usres based on smart devices usage#

ggplot(Daily_use_Percentage,aes(x="",y=Percentage,fill=usage))+
  geom_bar(stat = "identity",width = 1)+
  coord_polar("y")+
  ggtitle("Pie chart based on no. of days smart devices used")+
  theme_minimal()+
  geom_text(aes(label=Percentage),position = position_stack(vjust=.05))


 #Insight- No of Active and Passive users are more than moderate users#
  
  # categorize people based on activity level-as totalsteps taken #
  #Sedentary - Less than 5000 steps a day.
  #Lightly active - Between 5000 and 7499 steps a day.
  #Fairly active - Between 7500 and 9999 steps a day.
  #Very active - More than 10000 steps a day.
  
  Active_per_Totalstpes <- daily_activity_summary%>%
    group_by(Id)%>%
    mutate(user=case_when(Avg_steps < 5000 ~ "Sedentary",
                          Avg_steps >=5000 & Avg_steps <=7499 ~"Lightly_active",
                          Avg_steps >=7500 & Avg_steps <= 9999 ~ "Moderate_active",
                          Avg_steps >=10000 ~ "Very_active"))
  view(Active_per_Totalstpes)
  
  
  #Create a dataframe to calculate % of users based on Avg steps taken #
  
  Active_percentage <-Active_per_Totalstpes %>%
    group_by(user) %>%
    summarise(total=(n()))%>%
    mutate(totals =sum(total))%>%
    group_by(user)%>%
    summarise(Percentage=((total/totals)))%>%
    mutate(labels = scales::percent(Percentage))

  #Create a Pie chart to show usres based on Avg stpes taken#
  
  Active_percentage %>%
    ggplot(aes(x="",y=Percentage,fill=user))+
    geom_bar(stat = "identity",width = 1)+
    coord_polar("y")+
    ggtitle("Pie chart based on Avg steps taken")+
    theme_minimal()+
    theme(axis.title.x= element_blank(),
          axis.title.y = element_blank(),
          axis.ticks = element_blank(),
          panel.grid = element_blank(), 
          plot.title = element_text(hjust = 0.5, size=14, face = "bold"),
          axis.text.x = element_blank())+
    geom_text(aes(label = labels),position = position_stack(vjust = 0.5))
  







